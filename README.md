# AI API Service

Сервис для обработки запросов с использованием искусственного интеллекта. Сервис предоставляет API для взаимодействия с различными AI моделями и обработки запросов.

## Особенности

- Обработка запросов с использованием AI моделей
- Автоматическая генерация документации API
- Подробное логирование запросов
- Обработка ошибок и исключений
- Поддержка CORS
- Мониторинг состояния сервера

## Требования

- Python 3.8+
- FastAPI
- Uvicorn
- Другие зависимости указаны в `requirements.txt`

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd <project-directory>
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
# или
venv\Scripts\activate  # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Запуск

1. Запустите сервер в режиме разработки:
```bash
uvicorn app.main:app --reload
```

2. Для продакшена:
```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

## API Endpoints

### POST /api/process
Основной эндпоинт для обработки запросов с помощью AI.

**Запрос:**
```json
{
    "query": "ваш запрос"
}
```

**Ответ:**
```json
{
    "response": "ответ от AI"
}
```

### GET /health
Проверка работоспособности сервера.

**Ответ:**
```json
{
    "status": "healthy"
}
```

## Middleware

### RequestLoggingMiddleware
- Логирует все входящие запросы
- Отслеживает время выполнения
- Логирует тело запроса
- Добавляет request_id для отслеживания

### ErrorHandlingMiddleware
- Перехватывает необработанные исключения
- Логирует ошибки
- Возвращает структурированные ответы с ошибками

## Логирование

Сервис использует встроенный модуль logging Python. Логи включают:
- Время начала и завершения запроса
- Метод и URL запроса
- Тело запроса (если есть)
- Время выполнения
- Ошибки и исключения

## Конфигурация

Конфигурация сервера находится в файле `app/config/app_config.py`. Основные параметры:
- Максимальное количество шагов для AI
- Настройки логирования
- Параметры CORS

## Разработка

### Структура проекта
```
app/
├── ai_manager/
│   ├── session/
│   │   ├── base_session.py
│   │   ├── init_session.py
│   │   └── request_session.py
│   └── service.py
├── config/
│   └── app_config.py
├── middleware/
│   └── request_middleware.py
└── main.py
```

### Добавление новых функций
1. Создайте новый файл в соответствующей директории
2. Добавьте необходимые импорты
3. Реализуйте требуемую функциональность
4. Добавьте тесты
5. Обновите документацию

## Лицензия

MIT

## Авторы

- Ваше имя/команда